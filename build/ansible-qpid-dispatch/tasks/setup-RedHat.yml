---
- debug:
    msg: "EPEL package source variable: {{ dispatch_package_source_epel }}"

- name: Ensure Qpid Dispatch packages are installed (from EPEL)
  when: dispatch_package_source_epel is defined and dispatch_package_source_epel == true
  yum:
    name: "{{ item }}"
    state: latest
    enablerepo: epel
  with_items: "{{ dispatch_packages }}"
  notify:
    - qdrouterd is enabled
    - qdrouterd is started


- name: Ensure Qpid Dispatch packages are installed (from default)
  when: dispatch_package_source_epel is defined and dispatch_package_source_epel == false
  yum:
    name: "{{ item }}"
    state: latest
  with_items: "{{ dispatch_packages }}"
  notify:
    - qdrouterd is enabled
    - qdrouterd is started
